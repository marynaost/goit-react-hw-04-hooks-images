(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={overlay:"Modal_overlay__3q__1",modal:"Modal_modal__TZqbW"}},14:function(e,t,a){e.exports={button:"Button_button__3dDCZ"}},25:function(e,t,a){},46:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(4),r=a.n(o),s=(a(25),a(12)),i=a(3),l=a(8),u=a(13),b=a.n(u);a(46);var j={fetchImage:function(e,t){var a="?q=".concat(e,"&page=").concat(t,"&key=").concat("24009911-9ac198a76ee72dc693090197c","&image_type=photo&orientation=horizontal&per_page=12");return fetch("https://pixabay.com/api/"+a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong"))}))}},h=a(18),m=(a(47),a(5)),d=a.n(m),f=a(1);function p(e){var t=e.onSubmit,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],r=c[1];return Object(f.jsx)("header",{className:d.a.searchbar,children:Object(f.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""===o.trim())return l.b.error("Enter the name");t(o),r("")},className:d.a.form,children:[Object(f.jsxs)("button",{type:"submit",className:d.a.button,children:[Object(f.jsx)(h.a,{}),Object(f.jsx)("span",{className:d.a.label,children:"Search"})]}),Object(f.jsx)("input",{className:d.a.input,type:"text",value:o,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){r(e.target.value.toLowerCase())}})]})})}var O=a(7),g=a.n(O);var v=function(e){var t=e.src,a=e.largeImageURL,n=e.tags,c=e.onClick;return Object(f.jsx)("li",{className:g.a.item,onClick:c,children:Object(f.jsx)("img",{src:t,alt:n,"data-src":a,className:g.a.image})})};var _=function(e){var t=e.hits,a=e.onClick;return Object(f.jsx)("ul",{className:g.a.gallery,children:t.map((function(e){var t=e.id,n=e.webformatURL,c=e.largeImageURL,o=e.tags;return Object(f.jsx)(v,{src:n,largeImageURL:c,tags:o,onClick:a},t)}))})},x=a(14),y=a.n(x);var w=function(e){var t=e.onClick;return Object(f.jsx)("button",{type:"button",className:y.a.button,onClick:t,children:"Load more"})},k=a(15),C=a(16),S=a(20),N=a(19),I=a(11),E=a.n(I),L=document.querySelector("#modal-root"),D=function(e){Object(S.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(k.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(C.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt;return Object(o.createPortal)(Object(f.jsx)("div",{className:E.a.overlay,onClick:this.handleBackdropClick,children:Object(f.jsx)("div",{className:E.a.modal,children:Object(f.jsx)("img",{src:t,alt:a})})}),L)}}]),a}(n.Component),U=D;function q(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),r=Object(i.a)(o,2),u=r[0],h=r[1],m=Object(n.useState)(1),d=Object(i.a)(m,2),O=d[0],g=d[1],v=Object(n.useState)("idle"),x=Object(i.a)(v,2),y=x[0],k=x[1],C=Object(n.useState)(null),S=Object(i.a)(C,2),N=S[0],I=S[1],E=Object(n.useState)(!1),L=Object(i.a)(E,2),D=L[0],q=L[1],B=Object(n.useState)(""),R=Object(i.a)(B,2),W=R[0],A=R[1],M=Object(n.useState)(""),T=Object(i.a)(M,2),G=T[0],K=T[1];Object(n.useEffect)((function(){u?j.fetchImage(u,O).then((function(e){var t=e.hits;if(0===t.length)return l.b.warn("We haven't images with the name ".concat(u," "),{autoClose:3e3});c((function(e){return[].concat(Object(s.a)(e),Object(s.a)(t))})),k("resolved"),g(O)})).catch((function(e){I(e),k("rejected")})):c([])}),[O,u]);var F=function(){setTimeout((function(){window.scrollBy({top:document.documentElement.clientHeight-260,behavior:"smooth"})}),500)};return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(p,{onSubmit:function(e){c([]),h(e),g(1),k("pending")}}),"pending"===y&&Object(f.jsx)(b.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80,timeout:3e3}),"rejected"===y&&Object(f.jsxs)("p",{children:[" ",N.message," "]}),"resolved"===y&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(_,{hits:a,onClick:function(e){A(e.target.dataset.src),K(e.target.alt),q(!0)}}),Object(f.jsx)(w,{onClick:function(){F(),g((function(e){return e+1}))}}),D&&Object(f.jsx)(U,{onClose:function(){q(!1)},src:W,alt:G})]}),Object(f.jsx)(l.a,{autoClose:3e3})]})}r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(q,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__1id1V",form:"Searchbar_form__1UgR3",button:"Searchbar_button__3Ctqx",label:"Searchbar_label__19VfA",input:"Searchbar_input__2WCEx"}},7:function(e,t,a){e.exports={gallery:"ImageGallery_gallery__Y9825",item:"ImageGallery_item__2WA-w",image:"ImageGallery_image__1Itnf"}}},[[49,1,2]]]);
//# sourceMappingURL=main.a85e33d8.chunk.js.map